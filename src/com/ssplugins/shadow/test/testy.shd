main {
    store count exec{count_chars,"aaa"}
    log [count]
}

define count_chars (str) {
    set map =HashMap
    store i 0
    while [i] < %{str:length} {
        set c str:charAt([i])
        if %{map:containsKey([c])} == false {
            call map:put([c], 0)
        }
        set count map:get([c])
        store count [count] + 1
        call map:put([c], [count])
        store i [i] + 1
    }
    return [map]
}